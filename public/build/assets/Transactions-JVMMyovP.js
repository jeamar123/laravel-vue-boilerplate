import{p as ve,q as $e,s as q,r as C,v as Se,c as V,x as Te,y as Me,z as D,A as Ie,B as Ae,C as Ee,D as J,E as Z,I as oe,G as Re,H as De,N as de,l as ne,J as Oe,K as z,L as Ve,M as R,O as Ne,P as ce,_ as ye,Q as Ue,o as y,d as $,i as u,e as E,w,h as c,f as o,R as B,S as se,t as A,T as be,F,m as W,j as O,U as Pe,V as je,W as Be,X as xe,g as N,u as H,n as I,Y as me,Z as fe,k as ge,$ as Q,a0 as Fe}from"./app-qiqL2HN5.js";import{a as P,_ as pe}from"./TextInput.vue_vue_type_script_setup_true_lang-B-nQnCxH.js";import{p as Le,u as Qe,f as Ge,c as U,_ as he,a as te,b as le}from"./SelectInput.vue_vue_type_script_setup_true_lang-CK9XKdSJ.js";import{_ as ze}from"./Loading.vue_vue_type_script_setup_true_lang-CfLUIkr0.js";import{_ as X}from"./Modal.vue_vue_type_script_setup_true_lang-DJ0FJLZC.js";import{_ as qe}from"./CategoryForm-bi75uco4.js";import{_ as He}from"./AccountForm-C3yRH3WV.js";import{C as G}from"./Card-Bp_0ONhO.js";import{f as K}from"./number-BqreZRFo.js";import{_ as Y}from"./Heading.vue_vue_type_script_setup_true_lang-BNFqA62x.js";/* empty css            */function Ke({container:a,accept:v,walk:d,enabled:f}){ve(()=>{let n=a.value;if(!n||f!==void 0&&!f.value)return;let l=$e(a);if(!l)return;let e=Object.assign(m=>v(m),{acceptNode:v}),i=l.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,e,!1);for(;i.nextNode();)d(i.currentNode)})}var We=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(We||{}),Ye=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(Ye||{});function Je(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let we=Symbol("MenuContext");function ee(a){let v=Ve(we,null);if(v===null){let d=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,ee),d}return v}let Ze=q({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:v,attrs:d}){let f=C(1),n=C(null),l=C(null),e=C([]),i=C(""),m=C(null),b=C(1);function s(t=p=>p){let p=m.value!==null?e.value[m.value]:null,x=Ue(t(e.value.slice()),k=>D(k.dataRef.domRef)),_=p?x.indexOf(p):null;return _===-1&&(_=null),{items:x,activeItemIndex:_}}let r={menuState:f,buttonRef:n,itemsRef:l,items:e,searchQuery:i,activeItemIndex:m,activationTrigger:b,closeMenu:()=>{f.value=1,m.value=null},openMenu:()=>f.value=0,goToItem(t,p,x){let _=s(),k=Ge(t===U.Specific?{focus:U.Specific,id:p}:{focus:t},{resolveItems:()=>_.items,resolveActiveIndex:()=>_.activeItemIndex,resolveId:T=>T.id,resolveDisabled:T=>T.dataRef.disabled});i.value="",m.value=k,b.value=x??1,e.value=_.items},search(t){let p=i.value!==""?0:1;i.value+=t.toLowerCase();let x=(m.value!==null?e.value.slice(m.value+p).concat(e.value.slice(0,m.value+p)):e.value).find(k=>k.dataRef.textValue.startsWith(i.value)&&!k.dataRef.disabled),_=x?e.value.indexOf(x):-1;_===-1||_===m.value||(m.value=_,b.value=1)},clearSearch(){i.value=""},registerItem(t,p){let x=s(_=>[..._,{id:t,dataRef:p}]);e.value=x.items,m.value=x.activeItemIndex,b.value=1},unregisterItem(t){let p=s(x=>{let _=x.findIndex(k=>k.id===t);return _!==-1&&x.splice(_,1),x});e.value=p.items,m.value=p.activeItemIndex,b.value=1}};return Se([n,l],(t,p)=>{var x;r.closeMenu(),Te(p,Me.Loose)||(t.preventDefault(),(x=D(n))==null||x.focus())},V(()=>f.value===0)),Ie(we,r),Ae(V(()=>Ee(f.value,{0:J.Open,1:J.Closed}))),()=>{let t={open:f.value===0,close:r.closeMenu};return Z({ourProps:{},theirProps:a,slot:t,slots:v,attrs:d,name:"Menu"})}}}),Xe=q({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(a,{attrs:v,slots:d,expose:f}){var n;let l=(n=a.id)!=null?n:`headlessui-menu-button-${oe()}`,e=ee("MenuButton");f({el:e.buttonRef,$el:e.buttonRef});function i(r){switch(r.key){case R.Space:case R.Enter:case R.ArrowDown:r.preventDefault(),r.stopPropagation(),e.openMenu(),z(()=>{var t;(t=D(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(U.First)});break;case R.ArrowUp:r.preventDefault(),r.stopPropagation(),e.openMenu(),z(()=>{var t;(t=D(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(U.Last)});break}}function m(r){switch(r.key){case R.Space:r.preventDefault();break}}function b(r){a.disabled||(e.menuState.value===0?(e.closeMenu(),z(()=>{var t;return(t=D(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(r.preventDefault(),e.openMenu(),Je(()=>{var t;return(t=D(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let s=Re(V(()=>({as:a.as,type:v.type})),e.buttonRef);return()=>{var r;let t={open:e.menuState.value===0},{...p}=a,x={ref:e.buttonRef,id:l,type:s.value,"aria-haspopup":"menu","aria-controls":(r=D(e.itemsRef))==null?void 0:r.id,"aria-expanded":e.menuState.value===0,onKeydown:i,onKeyup:m,onClick:b};return Z({ourProps:x,theirProps:p,slot:t,attrs:v,slots:d,name:"MenuButton"})}}}),et=q({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:v,slots:d,expose:f}){var n;let l=(n=a.id)!=null?n:`headlessui-menu-items-${oe()}`,e=ee("MenuItems"),i=C(null);f({el:e.itemsRef,$el:e.itemsRef}),Ke({container:V(()=>D(e.itemsRef)),enabled:V(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function m(t){var p;switch(i.value&&clearTimeout(i.value),t.key){case R.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case R.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let x=e.items.value[e.activeItemIndex.value];(p=D(x.dataRef.domRef))==null||p.click()}e.closeMenu(),ye(D(e.buttonRef));break;case R.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(U.Next);case R.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(U.Previous);case R.Home:case R.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(U.First);case R.End:case R.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(U.Last);case R.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),z(()=>{var x;return(x=D(e.buttonRef))==null?void 0:x.focus({preventScroll:!0})});break;case R.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),z(()=>Ne(D(e.buttonRef),t.shiftKey?ce.Previous:ce.Next));break;default:t.key.length===1&&(e.search(t.key),i.value=setTimeout(()=>e.clearSearch(),350));break}}function b(t){switch(t.key){case R.Space:t.preventDefault();break}}let s=De(),r=V(()=>s!==null?(s.value&J.Open)===J.Open:e.menuState.value===0);return()=>{var t,p;let x={open:e.menuState.value===0},{..._}=a,k={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(p=D(e.buttonRef))==null?void 0:p.id,id:l,onKeydown:m,onKeyup:b,role:"menu",tabIndex:0,ref:e.itemsRef};return Z({ourProps:k,theirProps:_,slot:x,attrs:v,slots:d,features:de.RenderStrategy|de.Static,visible:r.value,name:"MenuItems"})}}}),tt=q({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(a,{slots:v,attrs:d,expose:f}){var n;let l=(n=a.id)!=null?n:`headlessui-menu-item-${oe()}`,e=ee("MenuItem"),i=C(null);f({el:i,$el:i});let m=V(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===l:!1),b=Le(i),s=V(()=>({disabled:a.disabled,get textValue(){return b()},domRef:i}));ne(()=>e.registerItem(l,s)),Oe(()=>e.unregisterItem(l)),ve(()=>{e.menuState.value===0&&m.value&&e.activationTrigger.value!==0&&z(()=>{var T,g;return(g=(T=D(i))==null?void 0:T.scrollIntoView)==null?void 0:g.call(T,{block:"nearest"})})});function r(T){if(a.disabled)return T.preventDefault();e.closeMenu(),ye(D(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(U.Nothing);e.goToItem(U.Specific,l)}let p=Qe();function x(T){p.update(T)}function _(T){p.wasMoved(T)&&(a.disabled||m.value||e.goToItem(U.Specific,l,0))}function k(T){p.wasMoved(T)&&(a.disabled||m.value&&e.goToItem(U.Nothing))}return()=>{let{disabled:T}=a,g={active:m.value,disabled:T,close:e.closeMenu},{...L}=a;return Z({ourProps:{id:l,ref:i,role:"menuitem",tabIndex:T===!0?void 0:-1,"aria-disabled":T===!0?!0:void 0,disabled:void 0,onClick:r,onFocus:t,onPointerenter:x,onMouseenter:x,onPointermove:_,onMousemove:_,onPointerleave:k,onMouseleave:k},theirProps:{...d,...L},slot:g,attrs:d,slots:v,name:"MenuItem"})}}});function Ce(a,v){return y(),$("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}const lt={class:"relative"},at={class:"block truncate capitalize"},_e=q({__name:"Dropdown",props:{items:{type:Object,required:!0},modelValue:{type:[String,Boolean,Number,Object,null],default:null},dropdownDirection:{type:String,default:"bottom"},placeholder:{type:String,default:""},fixedPlaceholder:{type:Boolean,default:()=>!1},buttonClass:{type:[String,Array,Object],default:""}},emits:["change","update:model-value"],setup(a,{emit:v}){const d=a,f=v,n=C(d.modelValue);return(l,e)=>(y(),E(o(Ze),{as:"div",class:"min-w-16 cursor-pointer"},{default:w(()=>[u("div",lt,[c(o(Xe),{class:B(["relative flex items-center gap-x-2 w-full rounded py-2 px-3 text-left focus:outline-none text-xs hover:opacity-90 border border-slate-400 text-slate-700 bg-white",a.buttonClass])},{default:w(()=>[se(l.$slots,"button-content",{},()=>[u("span",at,A(a.fixedPlaceholder?a.placeholder||"Select":n.value?n.value:a.placeholder),1),c(o(Ce),{class:"w-4 text-slate-700","aria-hidden":"true"})])]),_:3},8,["class"]),c(be,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:w(()=>[c(o(et),{as:"div",class:B(["absolute max-h-60 border min-w-[150px] overflow-auto rounded-md bg-white z-10",[a.dropdownDirection==="bottom"?"bottom-10 md:bottom-auto md:top-10":"bottom-10"]])},{default:w(()=>[(y(!0),$(F,null,W(a.items,i=>(y(),E(o(tt),{key:i,as:"div",class:"cursor-pointer border-b border-[#e9eef4] px-3 pt-[10px] pb-[7px] text-xs text-[#3d4146] hover:bg-[#f8f9fa] capitalize",onClick:()=>{n.value=i,f("change",n.value),f("update:model-value",n.value)}},{default:w(()=>[O(A(i),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["class"])]),_:1})])]),_:3}))}}),st={class:"block truncate capitalize"},ot={__name:"PopoverWrapper",props:{containerClass:{type:[String,Array,Object],default:""},buttonLabel:{type:String,default:""},buttonClass:{type:[String,Array,Object],default:""},panelClass:{type:[String,Array,Object],default:""}},setup(a){return(v,d)=>(y(),E(o(Be),{class:B(["relative",a.containerClass])},{default:w(({open:f,close:n})=>[c(o(Pe),{class:B(["relative flex items-center gap-x-2 w-full rounded py-2 px-3 text-left focus:outline-none text-xs hover:opacity-90 border border-slate-400 text-slate-700",["",a.buttonClass]])},{default:w(()=>[se(v.$slots,"button-value",{},()=>[u("span",st,A(a.buttonLabel),1),c(o(Ce),{class:"w-4 text-slate-700","aria-hidden":"true"})])]),_:2},1032,["class"]),c(be,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:w(()=>[c(o(je),{class:B(["absolute z-[10] bg-white left-0 top-[38px] w-full rounded bg-white border",a.panelClass])},{default:w(()=>[se(v.$slots,"default",{close:n})]),_:2},1032,["class"])]),_:2},1024)]),_:3},8,["class"]))}},ae={__name:"Datepicker",props:{wrapperClass:{type:[String,Object,Array],default:""},modelValue:{type:[String,Date,Object,Array,null],default:null},monthPicker:{type:Boolean,default:()=>!1},range:{type:Boolean,default:()=>!1}},emits:["update:model-value","range-start","range-end"],setup(a,{emit:v}){const d=a,f=v,n=C(d.modelValue),l=e=>{e&&(n.value=e),f("update:model-value",e)};return(e,i)=>(y(),$("div",{class:B(["relative",a.wrapperClass])},[c(o(xe),{modelValue:n.value,"onUpdate:modelValue":[i[0]||(i[0]=m=>n.value=m),l],"input-class-name":"border-0 rounded-none py-2 px-1 border-b border-form-border outline-none text-sm read-only:border-gray-200 read-only:text-gray-500 read-only:cursor-not-allowed transition-all bg-white text-slate-800 font-sans",inline:"","month-picker":a.monthPicker,range:a.range,"auto-apply":!0,"hide-input-icon":!0,clearable:!1,"enable-time-picker":!1,format:"PP","action-row":{showNow:!1,showPreview:!0,showSelect:!1,showCancel:!1},config:{keepActionRow:!a.monthPicker},onRangeStart:i[1]||(i[1]=m=>f("range-start",n.value)),onRangeEnd:i[2]||(i[2]=m=>f("range-end",n.value))},null,8,["modelValue","month-picker","range","config"])],2))}},nt=["for"],rt={key:0},ut={class:"relative"},it={key:0,class:"mt-1"},dt={__name:"DatepickerInput",props:{id:{type:String,default:""},label:{type:String,default:""},required:{type:Boolean,default:()=>!1},errors:{type:Array,default:()=>[]},readOnly:{type:Boolean,default:()=>!1},wrapperClass:{type:[String,Object,Array],default:""},labelClass:{type:[String,Object,Array],default:""},modelValue:{type:[String,Date,null],default:null}},emits:["update:model-value"],setup(a,{emit:v}){const d=a,f=v,n=C(d.modelValue),l=e=>{e&&(n.value=e),f("update:model-value",e)};return(e,i)=>(y(),$("div",null,[u("div",{class:B(a.wrapperClass)},[a.label?(y(),$("label",{key:0,class:B(["text-xs block font-semibold mb-1",[{"text-gray-500 cursor-not-allowed":a.readOnly},a.labelClass]]),for:a.id},[O(A(a.label),1),a.required?(y(),$("span",rt,"*")):N("",!0)],10,nt)):N("",!0)],2),u("div",ut,[c(o(xe),{modelValue:n.value,"onUpdate:modelValue":[i[0]||(i[0]=m=>n.value=m),l],"input-class-name":"rounded py-2 px-2 border border-form-border outline-none text-sm read-only:border-gray-200 read-only:text-gray-500 read-only:cursor-not-allowed transition-all bg-white text-slate-800 font-sans focus:border-gray-900","auto-apply":!0,"hide-input-icon":!0,clearable:!1,"enable-time-picker":!1,format:"PP"},null,8,["modelValue"])]),a.errors.length?(y(),$("div",it,[(y(!0),$(F,null,W(a.errors,m=>(y(),$("p",{key:m,class:"text-red-500 block text-xs"},A(m),1))),128))])):N("",!0)]))}},ct={__name:"CreateTransactionModal",props:{show:{type:Boolean,default:()=>!1}},emits:["close","success"],setup(a,{emit:v}){const d=v;return(f,n)=>(y(),E(o(X),{show:a.show,title:"Create Transaction","wrapper-class":"lg:max-w-[600px]",onClose:n[2]||(n[2]=l=>d("close"))},{"body-footer":w(()=>[c(o(ke),{"api-route":"REQUEST_CREATE_TRANSACTION",onClose:n[0]||(n[0]=l=>d("close")),onSuccess:n[1]||(n[1]=l=>d("success"))})]),_:1},8,["show"]))}},mt={__name:"UpdateTransactionModal",props:{show:{type:Boolean,default:()=>!1},model:{type:Object,required:!0}},emits:["close","confirm","success"],setup(a,{emit:v}){const d=v;return(f,n)=>(y(),E(o(X),{show:a.show,title:"Edit Transaction","wrapper-class":"lg:max-w-[500px]",onClose:n[2]||(n[2]=l=>d("close"))},{"body-footer":w(()=>[c(o(ke),{"api-route":"REQUEST_UPDATE_TRANSACTION",model:a.model,onClose:n[0]||(n[0]=l=>d("close")),onSuccess:n[1]||(n[1]=l=>d("success"))},null,8,["model"])]),_:1},8,["show"]))}},ft={__name:"DeleteTransaction",props:{show:{type:Boolean,default:()=>!1},model:{type:[Object,Array],required:!0}},emits:["close","confirm"],setup(a,{emit:v}){const d=a,f=v,l=H().dispatch,e=async()=>{let{status:i}=await l("REQUEST_DELETE_TRANSACTION",{id:d.model.id});i===200&&(l("SHOW_NOTIF_ALERT",{message:"Transaction deleted."}),f("confirm"))};return(i,m)=>(y(),E(o(he),{show:a.show,message:"Are you sure you want to delete this transaction?",onClose:m[0]||(m[0]=b=>f("close")),onConfirm:e},null,8,["show"]))}},pt={class:"space-y-4 px-6 py-6"},vt={class:""},yt=u("label",{class:"text-xs block font-semibold mb-1"},"Type",-1),bt=u("label",{class:"text-xs block font-semibold mb-1"},"Date",-1),xt={class:"flex items-center justify-end gap-x-4 p-4"},gt={__name:"TransactionFilterModal",props:{show:{type:Boolean,default:()=>!1}},emits:["close","dates-changed"],setup(a,{emit:v}){const d=v,f=V(()=>{let s=I(i.value[0],"MMM dd, yyyy"),r=I(i.value[1],"MMM dd, yyyy"),t=`${s} - ${r}`,p=I(new Date(e.value.year,e.value.month),"MMM yyyy");return n.value==="daily"?I(l.value,"MMM dd, yyyy"):n.value==="monthly"?p:n.value==="calendar"?t:"Date label"}),n=C("monthly"),l=C(new Date),e=C({month:Number(I(new Date,"MM"))-1,year:Number(I(new Date,"yyyy"))}),i=C([new Date,new Date]),m=(s,r)=>{n.value==="daily"&&(e.value={month:Number(I(l.value,"M"))-1,year:Number(I(l.value,"yyyy"))},i.value=[l.value,l.value]),n.value==="monthly"&&(l.value=new Date(me(new Date(e.value.year,e.value.month))),i.value=[l.value,new Date(fe(l.value))]),n.value==="calendar"&&(l.value=i.value[0],e.value={month:Number(I(i.value[0],"M"))-1,year:Number(I(i.value[0],"yyyy"))}),r()},b=()=>{let s={start:new Date,end:new Date};n.value==="daily"&&(s.start=I(l.value,"yyyy-MM-dd"),s.end=I(l.value,"yyyy-MM-dd")),n.value==="monthly"&&(s.start=I(me(new Date(e.value.year,e.value.month)),"yyyy-MM-dd"),s.end=I(fe(new Date(e.value.year,e.value.month)),"yyyy-MM-dd")),n.value==="calendar"&&(s.start=I(i.value[0],"yyyy-MM-dd"),s.end=I(i.value[1],"yyyy-MM-dd")),d("dates-changed",s)};return(s,r)=>(y(),E(o(X),{show:a.show,title:"Transaction Filters","wrapper-class":"lg:max-w-[300px]",onClose:r[4]||(r[4]=t=>d("close"))},{"body-footer":w(()=>[u("div",pt,[u("div",vt,[yt,c(o(_e),{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=t=>n.value=t),class:"!min-w-0","button-class":"justify-between",items:["daily","monthly","calendar"]},null,8,["modelValue"])]),u("div",null,[bt,c(o(ot),{"button-class":"bg-white justify-between","panel-class":"w-max","button-label":f.value},{default:w(({close:t})=>[n.value==="daily"?(y(),E(o(ae),{key:0,modelValue:l.value,"onUpdate:modelValue":[r[1]||(r[1]=p=>l.value=p),p=>{m(p,t)}]},null,8,["modelValue","onUpdate:modelValue"])):N("",!0),n.value==="monthly"?(y(),E(o(ae),{key:1,modelValue:e.value,"onUpdate:modelValue":[r[2]||(r[2]=p=>e.value=p),p=>{m(p,t)}],"month-picker":!0},null,8,["modelValue","onUpdate:modelValue"])):N("",!0),n.value==="calendar"?(y(),E(o(ae),{key:2,modelValue:i.value,"onUpdate:modelValue":[r[3]||(r[3]=p=>i.value=p),p=>{m(p,t)}],range:!0},null,8,["modelValue","onUpdate:modelValue"])):N("",!0)]),_:1},8,["button-label"])])]),u("div",xt,[c(o(P),{variant:"blank"},{default:w(()=>[O(" Cancel ")]),_:1}),c(o(P),{onClick:b},{default:w(()=>[O(" Submit ")]),_:1})])]),_:1},8,["show"]))}},ht={class:"space-y-4 px-6 pt-6 pb-8"},wt={class:"grid lg:grid-cols-2 gap-x-3 gap-y-4"},Ct={class:"grid lg:grid-cols-2 gap-x-3 gap-y-4"},_t=u("br",null,null,-1),kt=u("span",{class:"underline"},"Add new category",-1),$t=u("br",null,null,-1),St=u("span",{class:"underline"},"Add new account",-1),Tt={class:"flex items-center justify-end gap-x-4 p-4"},ke={__name:"TransactionForm",props:{model:{type:Object,default:()=>{}},apiRoute:{type:String,required:!0}},emits:["close","success"],setup(a,{emit:v}){var p,x,_,k;const d=a,f=v,n=H(),l=n.dispatch,e=V(()=>n.state.accounts.items),i=V(()=>n.state.category.items),m=C(!1),b=C(!1),s=C({type:((x=(p=d.model)==null?void 0:p.category)==null?void 0:x.type)??"expenses",source:null,total:null,description:null,date:new Date,errors:{},success:!1,...d.model,category:((k=(_=d.model)==null?void 0:_.category)==null?void 0:k.name)??null}),r=async()=>{s.value.errors={},s.value.date&&(s.value.date=I(new Date(s.value.date),"yyyy-MM-dd HH:mm:ss"));const{data:T,status:g}=await l(d.apiRoute,s.value);[200,201].includes(g)?(s.value.success=!0,t(),l("SHOW_NOTIF_ALERT",{message:"Changes saved."}),f("success")):(s.value.errors=T.errors,s.value.errors.name="")},t=()=>{s.value={source:null,total:null,description:null,category:null,date:new Date,errors:{},success:!1}};return(T,g)=>{var L,j,h,M,re,ue,ie;return y(),$(F,null,[u("form",{novalidate:"",onSubmit:ge(r,["prevent"])},[u("div",ht,[u("div",wt,[c(o(te),{modelValue:s.value.type,"onUpdate:modelValue":[g[0]||(g[0]=S=>s.value.type=S),g[1]||(g[1]=S=>s.value.category=null)],label:"Type",items:["income","expenses"],errors:(L=s.value.errors)==null?void 0:L.type},null,8,["modelValue","errors"])]),u("div",Ct,[c(o(dt),{modelValue:s.value.date,"onUpdate:modelValue":g[2]||(g[2]=S=>s.value.date=S),label:"Date",errors:(j=s.value.errors)==null?void 0:j.date},null,8,["modelValue","errors"]),c(o(pe),{modelValue:s.value.total,"onUpdate:modelValue":g[3]||(g[3]=S=>s.value.total=S),label:"Amount",type:"number",errors:(h=s.value.errors)==null?void 0:h.total},null,8,["modelValue","errors"]),u("div",null,[i.value.filter(({type:S})=>S===s.value.type).length?(y(),$(F,{key:0},[c(o(te),{modelValue:s.value.category,"onUpdate:modelValue":g[4]||(g[4]=S=>s.value.category=S),"button-class":"!min-h-[38px]",label:"Category",items:i.value.filter(({type:S})=>S===s.value.type),errors:(M=s.value.errors)==null?void 0:M.category},null,8,["modelValue","items","errors"]),u("button",{type:"button",class:"outline-none text-[10px] text-center italic underline",onClick:g[5]||(g[5]=S=>m.value=!0)}," Add new category ")],64)):(y(),$("button",{key:1,type:"button",class:"text-xs w-full block bg-gray-200 rounded py-3 px-2 italic",onClick:g[6]||(g[6]=S=>m.value=!0)},[O(" No "+A(s.value.type)+" Categories yet. ",1),_t,kt]))]),u("div",null,[e.value.length?(y(),$(F,{key:0},[c(o(te),{modelValue:s.value.source,"onUpdate:modelValue":g[7]||(g[7]=S=>s.value.source=S),"button-class":"!min-h-[38px]",label:"Source",items:e.value,errors:(re=s.value.errors)==null?void 0:re.source},null,8,["modelValue","items","errors"]),u("button",{type:"button",class:"outline-none text-[10px] text-center italic underline",onClick:g[8]||(g[8]=S=>b.value=!0)}," Add new account ")],64)):(y(),$("button",{key:1,type:"button",class:"mt-4 text-xs w-full block bg-gray-200 rounded py-3 px-2 italic",onClick:g[9]||(g[9]=S=>b.value=!0)},[O(" No Accounts yet."),$t,St]))]),c(o(pe),{modelValue:s.value.description,"onUpdate:modelValue":g[10]||(g[10]=S=>s.value.description=S),label:"Note",errors:(ue=s.value.errors)==null?void 0:ue.description},null,8,["modelValue","errors"])])]),u("div",Tt,[c(o(P),{variant:"blank",onClick:g[11]||(g[11]=S=>f("close"))},{default:w(()=>[O(" Cancel ")]),_:1}),c(o(P),{disabled:!((ie=i.value.filter(({type:S})=>S===s.value.type))!=null&&ie.length)||!e.value.length,type:"submit"},{default:w(()=>[O(" Submit ")]),_:1},8,["disabled"])])],32),c(o(qe),{show:m.value,type:s.value.type,onClose:g[12]||(g[12]=S=>m.value=!1),onSuccess:g[13]||(g[13]=()=>{o(l)("REQUEST_GET_CATEGORY"),m.value=!1})},null,8,["show","type"]),c(o(He),{show:b.value,onClose:g[14]||(g[14]=S=>b.value=!1),onSuccess:g[15]||(g[15]=()=>{o(l)("REQUEST_GET_ACCOUNTS"),b.value=!1})},null,8,["show"])],64)}}},Mt={__name:"TransactionsActions",emits:["action"],setup(a,{emit:v}){const d=v,f=C(null);return(n,l)=>(y(),$("div",null,[c(o(_e),{modelValue:f.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>f.value=e),l[1]||(l[1]=e=>d("action",f.value))],class:"min-w-0 md:min-w-16 w-max md:w-auto",placeholder:"Actions","fixed-placeholder":"",items:["delete"]},null,8,["modelValue"])]))}},It={class:"shrink-0"},At=u("div",{class:"grid md:grid-cols-4 gap-x-2 flex-1"},[u("div",{class:"hidden md:block font-medium text-xs"},"Note"),u("div",{class:"hidden md:block font-medium text-xs"},"Total"),u("div",{class:"hidden md:block font-medium text-xs"},"Source"),u("div",{class:"hidden md:block font-medium text-xs"},"Category"),u("div",{class:"block md:hidden font-medium text-xs"},"Transactions")],-1),Et=u("div",{class:"font-medium text-xs w-[52px]"},[u("span",{class:"hidden md:block"},"Actions")],-1),Rt={class:"md:py-2 md:space-y-2 mr-[-3px] pr-[3px]"},Dt={class:"shrink-0"},Ot={class:"font-semibold flex-1"},Vt={class:"shrink-0"},Nt={class:"shrink-0"},Ut={class:"grid md:grid-cols-4 gap-y-1 gap-x-2 flex-1 items-start"},Pt={class:"capitalize"},jt={class:"inline-block border border-slate-400 py-[1px] px-1 rounded text-xs"},Bt={class:"flex items-center justify-end gap-x-1 w-[52px]"},Ft={key:0,class:"text-center px-4 py-3 text-xs"},Lt=q({__name:"TransactionList",props:{transactions:{type:Array,default:()=>[]}},emits:["edit","delete","selected","checkbox-checked"],setup(a,{emit:v}){const d=a,f=v,n=C(!1),l=C([]),e=b=>{n.value=b,b?l.value=d.transactions.reduce((s,r)=>(s=[...s,...r.items.map(({id:t})=>t)],s),[]):l.value=[],f("selected",l.value)},i=(b,s)=>{b?s.forEach(r=>{l.value.includes(r)||l.value.push(r)}):l.value=l.value.filter(r=>!s.includes(r)),f("selected",l.value)},m=(b,s)=>{n.value=!1,s?l.value.includes(b)||l.value.push(b):l.value=l.value.filter(r=>r!==b),f("selected",l.value)};return(b,s)=>(y(),$("div",null,[c(o(G),{class:"!px-2 !py-3 md:!px-4 md:!py-3 flex items-center gap-x-5 md:!bg-gray-200"},{default:w(()=>[u("div",It,[c(o(le),{checked:n.value,onChange:s[0]||(s[0]=r=>{e(r),f("checkbox-checked",l.value)})},null,8,["checked"])]),At,Et]),_:1}),u("div",Rt,[(y(!0),$(F,null,W(a.transactions,r=>(y(),$("div",{key:r.date},[c(o(G),{class:"!px-2 !py-3 md:!px-4 md:!py-3 flex items-center gap-x-5 cursor-pointer !bg-slate-200 mb-1",onClick:t=>r.show=!r.show},{default:w(()=>[u("div",Dt,[c(o(le),{checked:[...r.items.map(t=>t.id)].every(t=>l.value.includes(t)),onClick:s[1]||(s[1]=ge(()=>{},["stop"])),onChange:t=>{i(t,r.items.map(p=>p.id)),f("checkbox-checked",l.value)}},null,8,["checked","onChange"])]),u("div",Ot,A(o(I)(r.date,"MMM dd, yyyy")),1),u("div",Vt,[c(o(Q),{name:r.show?"ChevronUpIcon":"ChevronDownIcon",class:"w-5"},null,8,["name"])])]),_:2},1032,["onClick"]),r.show?(y(!0),$(F,{key:0},W(r.items,t=>(y(),E(o(G),{key:t.id,class:"!px-2 !py-3 md:!p-4 flex items-start gap-x-5"},{default:w(()=>{var p,x,_;return[u("div",Nt,[c(o(le),{checked:l.value.includes(t.id),onChange:k=>{m(t.id,k),f("checkbox-checked",l.value)}},null,8,["checked","onChange"])]),u("div",Ut,[u("div",null,A(t.description),1),u("div",{class:B(["font-medium",((p=t.category)==null?void 0:p.type)==="expenses"?"text-red-600":"text-green-600"])},A(`${((x=t.category)==null?void 0:x.type)==="expenses"?"-":""}${o(K)(t.total)}`),3),u("div",Pt,A(t.source),1),u("div",null,[u("span",jt,A(((_=t.category)==null?void 0:_.name)||"Uncategorized"),1)])]),u("div",Bt,[c(o(P),{variant:"blank",class:"!px-1 !py-0",onClick:k=>f("edit",t)},{default:w(()=>[c(o(Q),{name:"PencilSquareIconOutline",class:"w-4"})]),_:2},1032,["onClick"]),c(o(P),{variant:"blank",class:"!px-1 !py-0",onClick:k=>f("delete",t)},{default:w(()=>[c(o(Q),{name:"TrashIconOutline",class:"w-4"})]),_:2},1032,["onClick"])])]}),_:2},1024))),128)):N("",!0)]))),128)),a.transactions.length?N("",!0):(y(),$("div",Ft," No items yet. "))])]))}}),Qt={class:"space-y-2 px-6 py-4"},Gt={class:"group relative border border-dashed border-slate-400 hover:border-slate-900 w-full h-[180px] rounded flex items-center justify-center cursor-pointer mb-3 transition-all ease-in duration-200"},zt={key:0,class:"text-center flex flex-col items-center text-slate-600 group-hover:text-slate-900 transition-all ease-in duration-200"},qt=u("p",{class:"w-[120px] mx-auto",textContent:"Click or Drop to upload a file"},null,-1),Ht={key:1,class:"text-center"},Kt=u("span",{class:"font-bold"},"Filename:",-1),Wt={class:"flex items-center justify-end gap-x-4 p-4"},Yt={__name:"ImportTransactionsModal",props:{show:{type:Boolean,default:()=>!1}},emits:["close","success"],setup(a,{emit:v}){const d=v,n=H().dispatch,l=C({file:null}),e=C(null),i=async()=>{let b=new FormData;b.append("file",l.value.file);const s=await n("REQUEST_UPLOAD_TRANSACTIONS",b);s.status===201&&(n("SHOW_NOTIF_ALERT",{message:`${s.data.sucessfulImport.length} successful imports. ${s.data.failedImport.length} failed.`}),d("success"))},m=()=>{l.value.file=null,document.getElementById("file").value=""};return(b,s)=>(y(),E(o(X),{show:a.show,title:"Import Transactions","wrapper-class":"lg:max-w-[600px]",onClose:s[2]||(s[2]=()=>{m(),d("close")})},{"body-footer":w(()=>[u("div",Qt,[u("div",Gt,[u("input",{id:"file",ref_key:"file",ref:e,type:"file",class:"h-full w-full absolute top-0 left-0 opacity-0 text-[0] cursor-pointer",onInput:s[0]||(s[0]=r=>{l.value.file=r.target.files[0]})},null,544),l.value.file?(y(),$("div",Ht,[u("p",null,[Kt,O(" "+A(l.value.file.name),1)])])):(y(),$("div",zt,[c(o(Q),{name:"ArrowUpTrayIconOutline",class:"w-8 mb-3"}),qt]))])]),u("div",Wt,[c(o(P),{variant:"blank",onClick:s[1]||(s[1]=r=>d("close"))},{default:w(()=>[O(" Cancel ")]),_:1}),c(o(P),{type:"button",variant:l.value.file?"primary":"disabled",disabled:!l.value.file,onClick:i},{default:w(()=>[O(" Upload ")]),_:1},8,["variant","disabled"])])]),_:1},8,["show"]))}},Jt={class:"flex flex-col md:gap-y-2"},Zt={class:"text-2xl font-medium"},Xt={class:"text-2xl font-medium"},el={__name:"TransactionSummary",setup(a){const v=H(),d=V(()=>v.state.transactions.summary);return(f,n)=>(y(),$("div",Jt,[c(o(G),{class:"!py-2 md:!p-5"},{default:w(()=>[c(o(Y),{as:"h5",class:"text-slate-800 mb-1"},{default:w(()=>[O("Balance")]),_:1}),u("p",{class:B(["text-2xl font-semibold",d.value.balance<0?"text-red-800":"text-green-800"])},A(o(K)(d.value.balance)),3)]),_:1}),c(o(G),{class:"!py-2 md:!p-5"},{default:w(()=>[c(o(Y),{as:"h5",class:"text-slate-800 mb-1"},{default:w(()=>[O("Income")]),_:1}),u("p",Zt,A(o(K)(d.value.income)),1)]),_:1}),c(o(G),{class:"!py-2 md:!p-5"},{default:w(()=>[c(o(Y),{as:"h5",class:"text-slate-800 mb-1"},{default:w(()=>[O("Expenses")]),_:1}),u("p",Xt,A(o(K)(d.value.expenses)),1)]),_:1})]))}},tl={class:"flex flex-col space-y-1"},ll={__name:"TransactionCategories",setup(a){const v=H(),d=v.dispatch,f=V(()=>v.state.transactions.categories.filter(({total:l})=>l!==0)),n=C([{bgColor:"#e5f6ff",fontColor:"inherit"},{bgColor:"#ceeaf9",fontColor:"inherit"},{bgColor:"#b8ddf4",fontColor:"inherit"},{bgColor:"#a1d1ee",fontColor:"inherit"},{bgColor:"#8ac4e9",fontColor:"inherit"},{bgColor:"#73b7e4",fontColor:"inherit"},{bgColor:"#5aaae0",fontColor:"inherit"},{bgColor:"#3c9edb",fontColor:"inherit"},{bgColor:"#0091d6",fontColor:"inherit"},{bgColor:"#0585c7",fontColor:"#fff"},{bgColor:"#0879b9",fontColor:"#fff"},{bgColor:"#096dab",fontColor:"#fff"},{bgColor:"#09619c",fontColor:"#fff"},{bgColor:"#08568e",fontColor:"#fff"},{bgColor:"#054b80",fontColor:"#fff"},{bgColor:"#034073",fontColor:"#fff"},{bgColor:"#003665",fontColor:"#fff"},{bgColor:"#1b4576",fontColor:"#fff"},{bgColor:"#2f5488",fontColor:"#fff"},{bgColor:"#41649a",fontColor:"#fff"}]);return ne(()=>{d("REQUEST_GET_TRANSACTIONS_BY_CATEGORY")}),(l,e)=>(y(),E(o(G),null,{default:w(()=>[c(o(Y),{as:"h3",class:"text-slate-800 mb-2"},{default:w(()=>[O("Categories")]),_:1}),u("div",tl,[(y(!0),$(F,null,W(f.value,({name:i,total:m},b)=>{var s,r,t;return y(),$("div",{key:i,class:"border text-sm rounded px-2 py-[3px] flex items-center justify-between",style:Fe({"background-color":(s=n.value[b])==null?void 0:s.bgColor,color:(r=n.value[b])==null?void 0:r.fontColor,"border-color":(t=n.value[b])==null?void 0:t.bgColor})},[u("label",null,A(i),1),u("p",null,A(o(K)(m)),1)],4)}),128))])]),_:1}))}},al={class:"container md:pt-2 lg:pt-5 md:px-2 lg:px-8 h-full"},sl={class:"flex flex-col lg:flex-row-reverse gap-y-10 gap-x-4"},ol={class:"flex-1 flex flex-col space-y-3 shrink-0 lg:pt-[50px]"},nl={class:"lg:w-9/12 h-max"},rl={class:"px-2 md:px-0 mb-3 flex flex-row items-start md:items-center justify-between gap-y-2 gap-x-2"},ul={class:"flex flex-col md:flex-row gap-y-5 gap-x-2 md:gap-x-4 md:items-center"},il={class:"flex items-center gap-x-2"},dl=u("span",{class:"text-xs"},"Filters: ",-1),cl={class:"flex gap-x-2"},ml={key:0,class:"bg-gray-200 rounded py-[2px] px-2 text-[11px]"},fl={class:"flex md:items-center justify-end flex-1 gap-x-2"},$l={__name:"Transactions",setup(a){const v=H(),d=v.dispatch,f=v.commit,n=V(()=>v.state.transactions.items),l=V(()=>v.state.transactions.filters),e=C(null),i=C([]),m=C(!1),b=C(!1),s=C(!1),r=C(!1),t=C(!1),p=C(!1),x=C(!1),_=C(!0);ne(async()=>{_.value=!0,await k(),d("REQUEST_GET_ACCOUNTS"),d("REQUEST_GET_CATEGORY")});const k=async()=>{await d("REQUEST_GET_TRANSACTIONS_SUMMARY"),await d("REQUEST_GET_TRANSACTIONS"),_.value=!1},T=j=>{f("UPDATE_TRANSACTIONS_STATE",{...l,filters:{start:j.start,end:j.end}}),k()},g=j=>{j==="update"&&(p.value=!0),j==="delete"&&(x.value=!0)},L=async()=>{(await d("REQUEST_BULK_DELETE_TRANSACTION",{transactions:i.value})).status===200&&(k(),s.value=!1,x.value=!1)};return(j,h)=>(y(),$(F,null,[u("section",al,[u("div",sl,[u("div",ol,[c(o(el)),c(o(ll))]),u("div",nl,[u("div",rl,[u("div",ul,[i.value.length?(y(),E(o(Mt),{key:0,onAction:g})):N("",!0),u("div",il,[dl,u("div",cl,[Object.keys(l.value).includes("start")&&Object.keys(l.value).includes("end")?(y(),$("div",ml,A(o(I)(l.value.start,"MMM dd, yyyy"))+" - "+A(o(I)(l.value.end,"MMM dd, yyyy")),1)):N("",!0)])])]),u("div",fl,[c(o(P),{variant:"blank",class:"!border !border-solid !border-slate-800",onClick:h[0]||(h[0]=M=>t.value=!0)},{default:w(()=>[c(o(Q),{name:"ArrowUpTrayIconOutline",class:"w-5 h-5 text-slate-900"})]),_:1}),c(o(P),{variant:"blank",class:"!p-[6px] !border !border-solid !border-slate-800",onClick:h[1]||(h[1]=M=>r.value=!0)},{default:w(()=>[c(o(Q),{name:"AdjustmentsHorizontalIconOutline",class:"w-6 h-6 text-slate-900"})]),_:1}),c(o(P),{class:"!p-2",onClick:h[2]||(h[2]=M=>m.value=!0)},{default:w(()=>[c(o(Q),{name:"PlusIcon",class:"w-5 h-5"})]),_:1})])]),_.value?N("",!0):(y(),E(o(Lt),{key:0,transactions:n.value,onCheckboxChecked:h[3]||(h[3]=M=>i.value=M),onShow:h[4]||(h[4]=M=>{e.value=M}),onEdit:h[5]||(h[5]=M=>{e.value=M,b.value=!0}),onDelete:h[6]||(h[6]=M=>{e.value=M,s.value=!0})},null,8,["transactions"])),_.value?(y(),E(o(ze),{key:1,placement:"internal","show-text":!1})):N("",!0)])])]),c(o(gt),{show:r.value,onClose:h[7]||(h[7]=M=>r.value=!1),onDatesChanged:h[8]||(h[8]=M=>{T(M),r.value=!1})},null,8,["show"]),c(o(ct),{show:m.value,onClose:h[9]||(h[9]=M=>m.value=!1),onSuccess:h[10]||(h[10]=()=>{k(),m.value=!1})},null,8,["show"]),b.value?(y(),E(o(mt),{key:0,show:b.value,model:e.value,onClose:h[11]||(h[11]=M=>b.value=!1),onSuccess:h[12]||(h[12]=()=>{k(),b.value=!1})},null,8,["show","model"])):N("",!0),s.value?(y(),E(o(ft),{key:1,show:s.value,model:e.value,onClose:h[13]||(h[13]=M=>s.value=!1),onConfirm:L},null,8,["show","model"])):N("",!0),c(o(Yt),{show:t.value,onClose:h[14]||(h[14]=M=>t.value=!1),onSuccess:h[15]||(h[15]=()=>{k(),t.value=!1})},null,8,["show"]),c(o(he),{show:x.value,message:`Are you sure you want to delete (${i.value.length}) transaction${i.value.length>1?"s":""}?`,onClose:h[16]||(h[16]=M=>x.value=!1),onConfirm:L},null,8,["show","message"])],64))}};export{$l as default};
