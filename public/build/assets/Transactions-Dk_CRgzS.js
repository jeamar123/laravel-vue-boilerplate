import{p as ve,q as Ce,s as z,r as w,v as ke,c as V,x as _e,y as $e,z as D,A as Se,B as Te,C as Me,D as J,E as X,I as se,G as Ie,H as Ae,N as ie,l as oe,J as Ee,K as q,L as Re,M as R,O as De,P as de,_ as pe,Q as Oe,o as y,d as $,i as u,e as E,w as k,h as v,f as o,R as G,S as Ve,t as A,T as Ne,F as B,m as W,j as O,U as ye,g as N,u as H,n as I,V as ce,W as me,k as be,X as L,Y as Ue}from"./app-CIROyemG.js";import{a as P,_ as fe}from"./TextInput.vue_vue_type_script_setup_true_lang-CNt_zhcx.js";import{p as Pe,u as je,f as Be,c as U,_ as xe,a as te,b as le}from"./SelectInput.vue_vue_type_script_setup_true_lang-VRF6K_Sz.js";import{_ as Fe}from"./Loading.vue_vue_type_script_setup_true_lang-CR-4_zCX.js";import{_ as Z}from"./Modal.vue_vue_type_script_setup_true_lang-Bd6c79l9.js";import{_ as Le}from"./CategoryForm-CdKgkpHE.js";import{_ as Qe}from"./AccountForm-9C7SFsu4.js";import{C as Q}from"./Card-_FSanNY7.js";import{f as K}from"./number-BqreZRFo.js";import{_ as Y}from"./Heading.vue_vue_type_script_setup_true_lang-POrM6P4D.js";/* empty css            */function Ge({container:s,accept:p,walk:c,enabled:i}){ve(()=>{let n=s.value;if(!n||i!==void 0&&!i.value)return;let a=Ce(s);if(!a)return;let e=Object.assign(f=>p(f),{acceptNode:p}),d=a.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,e,!1);for(;d.nextNode();)c(d.currentNode)})}var qe=(s=>(s[s.Open=0]="Open",s[s.Closed=1]="Closed",s))(qe||{}),ze=(s=>(s[s.Pointer=0]="Pointer",s[s.Other=1]="Other",s))(ze||{});function He(s){requestAnimationFrame(()=>requestAnimationFrame(s))}let ge=Symbol("MenuContext");function ee(s){let p=Re(ge,null);if(p===null){let c=new Error(`<${s} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,ee),c}return p}let Ke=z({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(s,{slots:p,attrs:c}){let i=w(1),n=w(null),a=w(null),e=w([]),d=w(""),f=w(null),m=w(1);function t(l=g=>g){let g=f.value!==null?e.value[f.value]:null,b=Oe(l(e.value.slice()),_=>D(_.dataRef.domRef)),C=g?b.indexOf(g):null;return C===-1&&(C=null),{items:b,activeItemIndex:C}}let r={menuState:i,buttonRef:n,itemsRef:a,items:e,searchQuery:d,activeItemIndex:f,activationTrigger:m,closeMenu:()=>{i.value=1,f.value=null},openMenu:()=>i.value=0,goToItem(l,g,b){let C=t(),_=Be(l===U.Specific?{focus:U.Specific,id:g}:{focus:l},{resolveItems:()=>C.items,resolveActiveIndex:()=>C.activeItemIndex,resolveId:T=>T.id,resolveDisabled:T=>T.dataRef.disabled});d.value="",f.value=_,m.value=b??1,e.value=C.items},search(l){let g=d.value!==""?0:1;d.value+=l.toLowerCase();let b=(f.value!==null?e.value.slice(f.value+g).concat(e.value.slice(0,f.value+g)):e.value).find(_=>_.dataRef.textValue.startsWith(d.value)&&!_.dataRef.disabled),C=b?e.value.indexOf(b):-1;C===-1||C===f.value||(f.value=C,m.value=1)},clearSearch(){d.value=""},registerItem(l,g){let b=t(C=>[...C,{id:l,dataRef:g}]);e.value=b.items,f.value=b.activeItemIndex,m.value=1},unregisterItem(l){let g=t(b=>{let C=b.findIndex(_=>_.id===l);return C!==-1&&b.splice(C,1),b});e.value=g.items,f.value=g.activeItemIndex,m.value=1}};return ke([n,a],(l,g)=>{var b;r.closeMenu(),_e(g,$e.Loose)||(l.preventDefault(),(b=D(n))==null||b.focus())},V(()=>i.value===0)),Se(ge,r),Te(V(()=>Me(i.value,{0:J.Open,1:J.Closed}))),()=>{let l={open:i.value===0,close:r.closeMenu};return X({ourProps:{},theirProps:s,slot:l,slots:p,attrs:c,name:"Menu"})}}}),We=z({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(s,{attrs:p,slots:c,expose:i}){var n;let a=(n=s.id)!=null?n:`headlessui-menu-button-${se()}`,e=ee("MenuButton");i({el:e.buttonRef,$el:e.buttonRef});function d(r){switch(r.key){case R.Space:case R.Enter:case R.ArrowDown:r.preventDefault(),r.stopPropagation(),e.openMenu(),q(()=>{var l;(l=D(e.itemsRef))==null||l.focus({preventScroll:!0}),e.goToItem(U.First)});break;case R.ArrowUp:r.preventDefault(),r.stopPropagation(),e.openMenu(),q(()=>{var l;(l=D(e.itemsRef))==null||l.focus({preventScroll:!0}),e.goToItem(U.Last)});break}}function f(r){switch(r.key){case R.Space:r.preventDefault();break}}function m(r){s.disabled||(e.menuState.value===0?(e.closeMenu(),q(()=>{var l;return(l=D(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})})):(r.preventDefault(),e.openMenu(),He(()=>{var l;return(l=D(e.itemsRef))==null?void 0:l.focus({preventScroll:!0})})))}let t=Ie(V(()=>({as:s.as,type:p.type})),e.buttonRef);return()=>{var r;let l={open:e.menuState.value===0},{...g}=s,b={ref:e.buttonRef,id:a,type:t.value,"aria-haspopup":"menu","aria-controls":(r=D(e.itemsRef))==null?void 0:r.id,"aria-expanded":e.menuState.value===0,onKeydown:d,onKeyup:f,onClick:m};return X({ourProps:b,theirProps:g,slot:l,attrs:p,slots:c,name:"MenuButton"})}}}),Ye=z({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(s,{attrs:p,slots:c,expose:i}){var n;let a=(n=s.id)!=null?n:`headlessui-menu-items-${se()}`,e=ee("MenuItems"),d=w(null);i({el:e.itemsRef,$el:e.itemsRef}),Ge({container:V(()=>D(e.itemsRef)),enabled:V(()=>e.menuState.value===0),accept(l){return l.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});function f(l){var g;switch(d.value&&clearTimeout(d.value),l.key){case R.Space:if(e.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),e.search(l.key);case R.Enter:if(l.preventDefault(),l.stopPropagation(),e.activeItemIndex.value!==null){let b=e.items.value[e.activeItemIndex.value];(g=D(b.dataRef.domRef))==null||g.click()}e.closeMenu(),pe(D(e.buttonRef));break;case R.ArrowDown:return l.preventDefault(),l.stopPropagation(),e.goToItem(U.Next);case R.ArrowUp:return l.preventDefault(),l.stopPropagation(),e.goToItem(U.Previous);case R.Home:case R.PageUp:return l.preventDefault(),l.stopPropagation(),e.goToItem(U.First);case R.End:case R.PageDown:return l.preventDefault(),l.stopPropagation(),e.goToItem(U.Last);case R.Escape:l.preventDefault(),l.stopPropagation(),e.closeMenu(),q(()=>{var b;return(b=D(e.buttonRef))==null?void 0:b.focus({preventScroll:!0})});break;case R.Tab:l.preventDefault(),l.stopPropagation(),e.closeMenu(),q(()=>De(D(e.buttonRef),l.shiftKey?de.Previous:de.Next));break;default:l.key.length===1&&(e.search(l.key),d.value=setTimeout(()=>e.clearSearch(),350));break}}function m(l){switch(l.key){case R.Space:l.preventDefault();break}}let t=Ae(),r=V(()=>t!==null?(t.value&J.Open)===J.Open:e.menuState.value===0);return()=>{var l,g;let b={open:e.menuState.value===0},{...C}=s,_={"aria-activedescendant":e.activeItemIndex.value===null||(l=e.items.value[e.activeItemIndex.value])==null?void 0:l.id,"aria-labelledby":(g=D(e.buttonRef))==null?void 0:g.id,id:a,onKeydown:f,onKeyup:m,role:"menu",tabIndex:0,ref:e.itemsRef};return X({ourProps:_,theirProps:C,slot:b,attrs:p,slots:c,features:ie.RenderStrategy|ie.Static,visible:r.value,name:"MenuItems"})}}}),Je=z({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(s,{slots:p,attrs:c,expose:i}){var n;let a=(n=s.id)!=null?n:`headlessui-menu-item-${se()}`,e=ee("MenuItem"),d=w(null);i({el:d,$el:d});let f=V(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===a:!1),m=Pe(d),t=V(()=>({disabled:s.disabled,get textValue(){return m()},domRef:d}));oe(()=>e.registerItem(a,t)),Ee(()=>e.unregisterItem(a)),ve(()=>{e.menuState.value===0&&f.value&&e.activationTrigger.value!==0&&q(()=>{var T,x;return(x=(T=D(d))==null?void 0:T.scrollIntoView)==null?void 0:x.call(T,{block:"nearest"})})});function r(T){if(s.disabled)return T.preventDefault();e.closeMenu(),pe(D(e.buttonRef))}function l(){if(s.disabled)return e.goToItem(U.Nothing);e.goToItem(U.Specific,a)}let g=je();function b(T){g.update(T)}function C(T){g.wasMoved(T)&&(s.disabled||f.value||e.goToItem(U.Specific,a,0))}function _(T){g.wasMoved(T)&&(s.disabled||f.value&&e.goToItem(U.Nothing))}return()=>{let{disabled:T}=s,x={active:f.value,disabled:T,close:e.closeMenu},{...F}=s;return X({ourProps:{id:a,ref:d,role:"menuitem",tabIndex:T===!0?void 0:-1,"aria-disabled":T===!0?!0:void 0,disabled:void 0,onClick:r,onFocus:l,onPointerenter:b,onMouseenter:b,onPointermove:C,onMousemove:C,onPointerleave:_,onMouseleave:_},theirProps:{...c,...F},slot:x,attrs:c,slots:p,name:"MenuItem"})}}});function Xe(s,p){return y(),$("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}const Ze={class:"relative"},et={class:"block truncate capitalize"},he=z({__name:"Dropdown",props:{items:{type:Object,required:!0},modelValue:{type:[String,Boolean,Number,Object,null],default:null},dropdownDirection:{type:String,default:"bottom"},placeholder:{type:String,default:""},fixedPlaceholder:{type:Boolean,default:()=>!1},buttonClass:{type:[String,Array,Object],default:""}},emits:["change","update:model-value"],setup(s,{emit:p}){const c=s,i=p,n=w(c.modelValue);return(a,e)=>(y(),E(o(Ke),{as:"div",class:"min-w-16 cursor-pointer"},{default:k(()=>[u("div",Ze,[v(o(We),{class:G(["relative flex items-center gap-x-2 w-full rounded py-2 px-3 text-left focus:outline-none text-xs hover:opacity-90 border border-form-border text-slate-700 bg-white",s.buttonClass])},{default:k(()=>[Ve(a.$slots,"button-content",{},()=>[u("span",et,A(s.fixedPlaceholder?s.placeholder||"Select":n.value?n.value:s.placeholder),1),v(o(Xe),{class:"w-4 text-slate-700","aria-hidden":"true"})])]),_:3},8,["class"]),v(Ne,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:k(()=>[v(o(Ye),{as:"div",class:G(["absolute max-h-60 border min-w-[150px] overflow-auto rounded-md bg-white z-10",[s.dropdownDirection==="bottom"?"bottom-10 md:bottom-auto md:top-10":"bottom-10"]])},{default:k(()=>[(y(!0),$(B,null,W(s.items,d=>(y(),E(o(Je),{key:d,as:"div",class:"cursor-pointer border-b border-[#e9eef4] px-3 pt-[10px] pb-[7px] text-xs text-[#3d4146] hover:bg-[#f8f9fa] capitalize",onClick:()=>{n.value=d,i("change",n.value),i("update:model-value",n.value)}},{default:k(()=>[O(A(d),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["class"])]),_:1})])]),_:3}))}}),ae={__name:"Datepicker",props:{wrapperClass:{type:[String,Object,Array],default:""},modelValue:{type:[String,Date,Object,Array,null],default:null},monthPicker:{type:Boolean,default:()=>!1},range:{type:Boolean,default:()=>!1}},emits:["update:model-value","range-start","range-end"],setup(s,{emit:p}){const c=s,i=p,n=w(c.modelValue),a=e=>{e&&(n.value=e),i("update:model-value",e)};return(e,d)=>(y(),$("div",{class:G(["relative",s.wrapperClass])},[v(o(ye),{modelValue:n.value,"onUpdate:modelValue":[d[0]||(d[0]=f=>n.value=f),a],"input-class-name":"border-0 rounded-none py-2 px-1 border-b border-form-border outline-none text-sm read-only:border-gray-200 read-only:text-gray-500 read-only:cursor-not-allowed transition-all bg-white text-slate-800 font-sans","menu-class-name":"!border !border-solid !border-form-border",inline:"",teleport:!0,"month-picker":s.monthPicker,range:s.range,"auto-apply":!0,"hide-input-icon":!0,clearable:!1,"enable-time-picker":!1,format:"PP","action-row":{showNow:!1,showPreview:!0,showSelect:!1,showCancel:!1},config:{keepActionRow:!s.monthPicker},onRangeStart:d[1]||(d[1]=f=>i("range-start",n.value)),onRangeEnd:d[2]||(d[2]=f=>i("range-end",n.value))},null,8,["modelValue","month-picker","range","config"])],2))}},tt=["for"],lt={key:0},at={class:"relative"},st={key:0,class:"mt-1"},ot={__name:"DatepickerInput",props:{id:{type:String,default:""},label:{type:String,default:""},required:{type:Boolean,default:()=>!1},errors:{type:Array,default:()=>[]},readOnly:{type:Boolean,default:()=>!1},wrapperClass:{type:[String,Object,Array],default:""},labelClass:{type:[String,Object,Array],default:""},modelValue:{type:[String,Date,null],default:null}},emits:["update:model-value"],setup(s,{emit:p}){const c=s,i=p,n=w(c.modelValue),a=e=>{e&&(n.value=e),i("update:model-value",e)};return(e,d)=>(y(),$("div",null,[u("div",{class:G(s.wrapperClass)},[s.label?(y(),$("label",{key:0,class:G(["text-xs block font-semibold mb-1",[{"text-gray-500 cursor-not-allowed":s.readOnly},s.labelClass]]),for:s.id},[O(A(s.label),1),s.required?(y(),$("span",lt,"*")):N("",!0)],10,tt)):N("",!0)],2),u("div",at,[v(o(ye),{modelValue:n.value,"onUpdate:modelValue":[d[0]||(d[0]=f=>n.value=f),a],"input-class-name":"rounded py-2 px-2 border border-form-border outline-none text-sm read-only:border-gray-200 read-only:text-gray-500 read-only:cursor-not-allowed transition-all bg-white text-slate-800 font-sans focus:border-gray-900","auto-apply":!0,"hide-input-icon":!0,clearable:!1,"enable-time-picker":!1,format:"PP"},null,8,["modelValue"])]),s.errors.length?(y(),$("div",st,[(y(!0),$(B,null,W(s.errors,f=>(y(),$("p",{key:f,class:"text-red-500 block text-xs"},A(f),1))),128))])):N("",!0)]))}},nt={__name:"CreateTransactionModal",props:{show:{type:Boolean,default:()=>!1}},emits:["close","success"],setup(s,{emit:p}){const c=p;return(i,n)=>(y(),E(o(Z),{show:s.show,title:"Create Transaction","wrapper-class":"lg:max-w-[600px]",onClose:n[2]||(n[2]=a=>c("close"))},{"body-footer":k(()=>[v(o(we),{"api-route":"REQUEST_CREATE_TRANSACTION",onClose:n[0]||(n[0]=a=>c("close")),onSuccess:n[1]||(n[1]=a=>c("success"))})]),_:1},8,["show"]))}},rt={__name:"UpdateTransactionModal",props:{show:{type:Boolean,default:()=>!1},model:{type:Object,required:!0}},emits:["close","confirm","success"],setup(s,{emit:p}){const c=p;return(i,n)=>(y(),E(o(Z),{show:s.show,title:"Edit Transaction","wrapper-class":"lg:max-w-[500px]",onClose:n[2]||(n[2]=a=>c("close"))},{"body-footer":k(()=>[v(o(we),{"api-route":"REQUEST_UPDATE_TRANSACTION",model:s.model,onClose:n[0]||(n[0]=a=>c("close")),onSuccess:n[1]||(n[1]=a=>c("success"))},null,8,["model"])]),_:1},8,["show"]))}},ut={__name:"DeleteTransaction",props:{show:{type:Boolean,default:()=>!1},model:{type:[Object,Array],required:!0}},emits:["close","confirm"],setup(s,{emit:p}){const c=s,i=p,a=H().dispatch,e=async()=>{let{status:d}=await a("REQUEST_DELETE_TRANSACTION",{id:c.model.id});d===200&&(a("SHOW_NOTIF_ALERT",{message:"Transaction deleted."}),i("confirm"))};return(d,f)=>(y(),E(o(xe),{show:s.show,message:"Are you sure you want to delete this transaction?",onClose:f[0]||(f[0]=m=>i("close")),onConfirm:e},null,8,["show"]))}},it={class:"space-y-4 px-6 py-6"},dt={class:""},ct=u("label",{class:"text-xs block font-semibold mb-1"},"Type",-1),mt=u("label",{class:"text-xs block font-semibold mb-1"},"Date",-1),ft={class:"relative z-[1]"},vt={class:"flex items-center justify-end gap-x-4 p-4"},pt={__name:"TransactionFilterModal",props:{show:{type:Boolean,default:()=>!1}},emits:["close","dates-changed"],setup(s,{emit:p}){const c=p;V(()=>{let m=I(e.value[0],"MMM dd, yyyy"),t=I(e.value[1],"MMM dd, yyyy"),r=`${m} - ${t}`,l=I(new Date(a.value.year,a.value.month),"MMM yyyy");return i.value==="daily"?I(n.value,"MMM dd, yyyy"):i.value==="monthly"?l:i.value==="calendar"?r:"Date label"});const i=w("monthly"),n=w(new Date),a=w({month:Number(I(new Date,"MM"))-1,year:Number(I(new Date,"yyyy"))}),e=w([new Date,new Date]),d=(m,t)=>{i.value==="daily"&&(a.value={month:Number(I(n.value,"M"))-1,year:Number(I(n.value,"yyyy"))},e.value=[n.value,n.value]),i.value==="monthly"&&(n.value=new Date(ce(new Date(a.value.year,a.value.month))),e.value=[n.value,new Date(me(n.value))]),i.value==="calendar"&&(n.value=e.value[0],a.value={month:Number(I(e.value[0],"M"))-1,year:Number(I(e.value[0],"yyyy"))}),t()},f=()=>{let m={start:new Date,end:new Date};i.value==="daily"&&(m.start=I(n.value,"yyyy-MM-dd"),m.end=I(n.value,"yyyy-MM-dd")),i.value==="monthly"&&(m.start=I(ce(new Date(a.value.year,a.value.month)),"yyyy-MM-dd"),m.end=I(me(new Date(a.value.year,a.value.month)),"yyyy-MM-dd")),i.value==="calendar"&&(m.start=I(e.value[0],"yyyy-MM-dd"),m.end=I(e.value[1],"yyyy-MM-dd")),c("dates-changed",m)};return(m,t)=>(y(),E(o(Z),{show:s.show,title:"Transaction Filters","wrapper-class":"lg:!max-w-[350px]",onClose:t[7]||(t[7]=r=>c("close"))},{"body-footer":k(()=>[u("div",it,[u("div",dt,[ct,v(o(he),{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=r=>i.value=r),class:"!min-w-0","button-class":"justify-between",items:["daily","monthly","calendar"]},null,8,["modelValue"])]),u("div",null,[mt,u("div",ft,[i.value==="daily"?(y(),E(o(ae),{key:0,modelValue:n.value,"onUpdate:modelValue":[t[1]||(t[1]=r=>n.value=r),t[2]||(t[2]=r=>{d(r,m.close)})]},null,8,["modelValue"])):N("",!0),i.value==="monthly"?(y(),E(o(ae),{key:1,modelValue:a.value,"onUpdate:modelValue":[t[3]||(t[3]=r=>a.value=r),t[4]||(t[4]=r=>{d(r,m.close)})],"month-picker":!0},null,8,["modelValue"])):N("",!0),i.value==="calendar"?(y(),E(o(ae),{key:2,modelValue:e.value,"onUpdate:modelValue":[t[5]||(t[5]=r=>e.value=r),t[6]||(t[6]=r=>{d(r,m.close)})],range:!0},null,8,["modelValue"])):N("",!0)])])]),u("div",vt,[v(o(P),{variant:"blank"},{default:k(()=>[O(" Cancel ")]),_:1}),v(o(P),{onClick:f},{default:k(()=>[O(" Submit ")]),_:1})])]),_:1},8,["show"]))}},yt={class:"space-y-4 px-6 pt-6 pb-8"},bt={class:"grid lg:grid-cols-2 gap-x-3 gap-y-4"},xt={class:"grid lg:grid-cols-2 gap-x-3 gap-y-4"},gt=u("br",null,null,-1),ht=u("span",{class:"underline"},"Add new category",-1),wt=u("br",null,null,-1),Ct=u("span",{class:"underline"},"Add new account",-1),kt={class:"flex items-center justify-end gap-x-4 p-4"},we={__name:"TransactionForm",props:{model:{type:Object,default:()=>{}},apiRoute:{type:String,required:!0}},emits:["close","success"],setup(s,{emit:p}){var g,b,C,_;const c=s,i=p,n=H(),a=n.dispatch,e=V(()=>n.state.accounts.items),d=V(()=>n.state.category.items),f=w(!1),m=w(!1),t=w({type:((b=(g=c.model)==null?void 0:g.category)==null?void 0:b.type)??"expenses",source:null,total:null,description:null,date:new Date,errors:{},success:!1,...c.model,category:((_=(C=c.model)==null?void 0:C.category)==null?void 0:_.name)??null}),r=async()=>{t.value.errors={},t.value.date&&(t.value.date=I(new Date(t.value.date),"yyyy-MM-dd HH:mm:ss"));const{data:T,status:x}=await a(c.apiRoute,t.value);[200,201].includes(x)?(t.value.success=!0,l(),a("SHOW_NOTIF_ALERT",{message:"Changes saved."}),i("success")):(t.value.errors=T.errors,t.value.errors.name="")},l=()=>{t.value={source:null,total:null,description:null,category:null,date:new Date,errors:{},success:!1}};return(T,x)=>{var F,j,h,M,ne,re,ue;return y(),$(B,null,[u("form",{novalidate:"",onSubmit:be(r,["prevent"])},[u("div",yt,[u("div",bt,[v(o(te),{modelValue:t.value.type,"onUpdate:modelValue":[x[0]||(x[0]=S=>t.value.type=S),x[1]||(x[1]=S=>t.value.category=null)],label:"Type",items:["income","expenses"],errors:(F=t.value.errors)==null?void 0:F.type},null,8,["modelValue","errors"])]),u("div",xt,[v(o(ot),{modelValue:t.value.date,"onUpdate:modelValue":x[2]||(x[2]=S=>t.value.date=S),label:"Date",errors:(j=t.value.errors)==null?void 0:j.date},null,8,["modelValue","errors"]),v(o(fe),{modelValue:t.value.total,"onUpdate:modelValue":x[3]||(x[3]=S=>t.value.total=S),label:"Amount",type:"number",errors:(h=t.value.errors)==null?void 0:h.total},null,8,["modelValue","errors"]),u("div",null,[d.value.filter(({type:S})=>S===t.value.type).length?(y(),$(B,{key:0},[v(o(te),{modelValue:t.value.category,"onUpdate:modelValue":x[4]||(x[4]=S=>t.value.category=S),"button-class":"!min-h-[38px]",label:"Category",items:d.value.filter(({type:S})=>S===t.value.type),errors:(M=t.value.errors)==null?void 0:M.category},null,8,["modelValue","items","errors"]),u("button",{type:"button",class:"outline-none text-[10px] text-center italic underline",onClick:x[5]||(x[5]=S=>f.value=!0)}," Add new category ")],64)):(y(),$("button",{key:1,type:"button",class:"text-xs w-full block bg-gray-200 rounded py-3 px-2 italic",onClick:x[6]||(x[6]=S=>f.value=!0)},[O(" No "+A(t.value.type)+" Categories yet. ",1),gt,ht]))]),u("div",null,[e.value.length?(y(),$(B,{key:0},[v(o(te),{modelValue:t.value.source,"onUpdate:modelValue":x[7]||(x[7]=S=>t.value.source=S),"button-class":"!min-h-[38px]",label:"Source",items:e.value,errors:(ne=t.value.errors)==null?void 0:ne.source},null,8,["modelValue","items","errors"]),u("button",{type:"button",class:"outline-none text-[10px] text-center italic underline",onClick:x[8]||(x[8]=S=>m.value=!0)}," Add new account ")],64)):(y(),$("button",{key:1,type:"button",class:"mt-4 text-xs w-full block bg-gray-200 rounded py-3 px-2 italic",onClick:x[9]||(x[9]=S=>m.value=!0)},[O(" No Accounts yet."),wt,Ct]))]),v(o(fe),{modelValue:t.value.description,"onUpdate:modelValue":x[10]||(x[10]=S=>t.value.description=S),label:"Note",errors:(re=t.value.errors)==null?void 0:re.description},null,8,["modelValue","errors"])])]),u("div",kt,[v(o(P),{variant:"blank",onClick:x[11]||(x[11]=S=>i("close"))},{default:k(()=>[O(" Cancel ")]),_:1}),v(o(P),{disabled:!((ue=d.value.filter(({type:S})=>S===t.value.type))!=null&&ue.length)||!e.value.length,type:"submit"},{default:k(()=>[O(" Submit ")]),_:1},8,["disabled"])])],32),v(o(Le),{show:f.value,type:t.value.type,onClose:x[12]||(x[12]=S=>f.value=!1),onSuccess:x[13]||(x[13]=()=>{o(a)("REQUEST_GET_CATEGORY"),f.value=!1})},null,8,["show","type"]),v(o(Qe),{show:m.value,onClose:x[14]||(x[14]=S=>m.value=!1),onSuccess:x[15]||(x[15]=()=>{o(a)("REQUEST_GET_ACCOUNTS"),m.value=!1})},null,8,["show"])],64)}}},_t={__name:"TransactionsActions",emits:["action"],setup(s,{emit:p}){const c=p,i=w(null);return(n,a)=>(y(),$("div",null,[v(o(he),{modelValue:i.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>i.value=e),a[1]||(a[1]=e=>c("action",i.value))],class:"min-w-0 md:min-w-16 w-max md:w-auto",placeholder:"Actions","fixed-placeholder":"",items:["delete"]},null,8,["modelValue"])]))}},$t={class:"shrink-0"},St=u("div",{class:"grid md:grid-cols-4 gap-x-2 flex-1"},[u("div",{class:"hidden md:block font-medium text-xs"},"Note"),u("div",{class:"hidden md:block font-medium text-xs"},"Total"),u("div",{class:"hidden md:block font-medium text-xs"},"Source"),u("div",{class:"hidden md:block font-medium text-xs"},"Category"),u("div",{class:"block md:hidden font-medium text-xs"},"Transactions")],-1),Tt=u("div",{class:"font-medium text-xs w-[52px]"},[u("span",{class:"hidden md:block"},"Actions")],-1),Mt={class:"md:py-2 md:space-y-2 mr-[-3px] pr-[3px]"},It={class:"shrink-0"},At={class:"font-semibold flex-1"},Et={class:"shrink-0"},Rt={class:"shrink-0"},Dt={class:"grid md:grid-cols-4 gap-y-1 gap-x-2 flex-1 items-start"},Ot={class:"capitalize"},Vt={class:"inline-block border border-slate-400 py-[1px] px-1 rounded text-xs"},Nt={class:"flex items-center justify-end gap-x-1 w-[52px]"},Ut={key:0,class:"text-center px-4 py-12 text-xs"},Pt=z({__name:"TransactionList",props:{transactions:{type:Array,default:()=>[]}},emits:["edit","delete","selected","checkbox-checked"],setup(s,{emit:p}){const c=s,i=p,n=w(!1),a=w([]),e=m=>{n.value=m,m?a.value=c.transactions.reduce((t,r)=>(t=[...t,...r.items.map(({id:l})=>l)],t),[]):a.value=[],i("selected",a.value)},d=(m,t)=>{m?t.forEach(r=>{a.value.includes(r)||a.value.push(r)}):a.value=a.value.filter(r=>!t.includes(r)),i("selected",a.value)},f=(m,t)=>{n.value=!1,t?a.value.includes(m)||a.value.push(m):a.value=a.value.filter(r=>r!==m),i("selected",a.value)};return(m,t)=>(y(),$("div",null,[v(o(Q),{class:"!px-2 !py-3 md:!px-4 md:!py-3 flex items-center gap-x-5 md:!bg-gray-200"},{default:k(()=>[u("div",$t,[v(o(le),{checked:n.value,onChange:t[0]||(t[0]=r=>{e(r),i("checkbox-checked",a.value)})},null,8,["checked"])]),St,Tt]),_:1}),u("div",Mt,[(y(!0),$(B,null,W(s.transactions,r=>(y(),$("div",{key:r.date},[v(o(Q),{class:"!px-2 !py-3 md:!px-4 md:!py-3 flex items-center gap-x-5 cursor-pointer !bg-slate-200 mb-1",onClick:l=>r.show=!r.show},{default:k(()=>[u("div",It,[v(o(le),{checked:[...r.items.map(l=>l.id)].every(l=>a.value.includes(l)),onClick:t[1]||(t[1]=be(()=>{},["stop"])),onChange:l=>{d(l,r.items.map(g=>g.id)),i("checkbox-checked",a.value)}},null,8,["checked","onChange"])]),u("div",At,A(o(I)(r.date,"MMM dd, yyyy")),1),u("div",Et,[v(o(L),{name:r.show?"ChevronUpIcon":"ChevronDownIcon",class:"w-5"},null,8,["name"])])]),_:2},1032,["onClick"]),r.show?(y(!0),$(B,{key:0},W(r.items,l=>(y(),E(o(Q),{key:l.id,class:"!px-2 !py-3 md:!p-4 flex items-start gap-x-5"},{default:k(()=>{var g,b,C;return[u("div",Rt,[v(o(le),{checked:a.value.includes(l.id),onChange:_=>{f(l.id,_),i("checkbox-checked",a.value)}},null,8,["checked","onChange"])]),u("div",Dt,[u("div",null,A(l.description),1),u("div",{class:G(["font-medium",((g=l.category)==null?void 0:g.type)==="expenses"?"text-red-600":"text-green-600"])},A(`${((b=l.category)==null?void 0:b.type)==="expenses"?"-":""}${o(K)(l.total)}`),3),u("div",Ot,A(l.source),1),u("div",null,[u("span",Vt,A(((C=l.category)==null?void 0:C.name)||"Uncategorized"),1)])]),u("div",Nt,[v(o(P),{variant:"blank",class:"!px-1 !py-0",onClick:_=>i("edit",l)},{default:k(()=>[v(o(L),{name:"PencilSquareIconOutline",class:"w-4"})]),_:2},1032,["onClick"]),v(o(P),{variant:"blank",class:"!px-1 !py-0",onClick:_=>i("delete",l)},{default:k(()=>[v(o(L),{name:"TrashIconOutline",class:"w-4"})]),_:2},1032,["onClick"])])]}),_:2},1024))),128)):N("",!0)]))),128)),s.transactions.length?N("",!0):(y(),$("div",Ut," No items yet. "))])]))}}),jt={class:"space-y-2 px-6 py-4"},Bt={class:"group relative border border-dashed border-slate-400 hover:border-slate-900 w-full h-[180px] rounded flex items-center justify-center cursor-pointer mb-3 transition-all ease-in duration-200"},Ft={key:0,class:"text-center flex flex-col items-center text-slate-600 group-hover:text-slate-900 transition-all ease-in duration-200"},Lt=u("p",{class:"w-[120px] mx-auto",textContent:"Click or Drop to upload a file"},null,-1),Qt={key:1,class:"text-center"},Gt=u("span",{class:"font-bold"},"Filename:",-1),qt={class:"flex items-center justify-end gap-x-4 p-4"},zt={__name:"ImportTransactionsModal",props:{show:{type:Boolean,default:()=>!1}},emits:["close","success"],setup(s,{emit:p}){const c=p,n=H().dispatch,a=w({file:null}),e=w(null),d=async()=>{let m=new FormData;m.append("file",a.value.file);const t=await n("REQUEST_UPLOAD_TRANSACTIONS",m);t.status===201&&(n("SHOW_NOTIF_ALERT",{message:`${t.data.sucessfulImport.length} successful imports. ${t.data.failedImport.length} failed.`}),c("success"))},f=()=>{a.value.file=null,document.getElementById("file").value=""};return(m,t)=>(y(),E(o(Z),{show:s.show,title:"Import Transactions","wrapper-class":"lg:max-w-[600px]",onClose:t[2]||(t[2]=()=>{f(),c("close")})},{"body-footer":k(()=>[u("div",jt,[u("div",Bt,[u("input",{id:"file",ref_key:"file",ref:e,type:"file",class:"h-full w-full absolute top-0 left-0 opacity-0 text-[0] cursor-pointer",onInput:t[0]||(t[0]=r=>{a.value.file=r.target.files[0]})},null,544),a.value.file?(y(),$("div",Qt,[u("p",null,[Gt,O(" "+A(a.value.file.name),1)])])):(y(),$("div",Ft,[v(o(L),{name:"ArrowUpTrayIconOutline",class:"w-8 mb-3"}),Lt]))])]),u("div",qt,[v(o(P),{variant:"blank",onClick:t[1]||(t[1]=r=>c("close"))},{default:k(()=>[O(" Cancel ")]),_:1}),v(o(P),{type:"button",variant:a.value.file?"primary":"disabled",disabled:!a.value.file,onClick:d},{default:k(()=>[O(" Upload ")]),_:1},8,["variant","disabled"])])]),_:1},8,["show"]))}},Ht={class:"flex flex-col md:gap-y-2"},Kt={class:"text-2xl font-medium"},Wt={class:"text-2xl font-medium"},Yt={__name:"TransactionSummary",setup(s){const p=H(),c=V(()=>p.state.transactions.summary);return(i,n)=>(y(),$("div",Ht,[v(o(Q),{class:"!py-2 md:!p-5"},{default:k(()=>[v(o(Y),{as:"h5",class:"text-slate-800 mb-1"},{default:k(()=>[O("Balance")]),_:1}),u("p",{class:G(["text-2xl font-semibold",c.value.balance<0?"text-red-800":"text-green-800"])},A(o(K)(c.value.balance)),3)]),_:1}),v(o(Q),{class:"!py-2 md:!p-5"},{default:k(()=>[v(o(Y),{as:"h5",class:"text-slate-800 mb-1"},{default:k(()=>[O("Income")]),_:1}),u("p",Kt,A(o(K)(c.value.income)),1)]),_:1}),v(o(Q),{class:"!py-2 md:!p-5"},{default:k(()=>[v(o(Y),{as:"h5",class:"text-slate-800 mb-1"},{default:k(()=>[O("Expenses")]),_:1}),u("p",Wt,A(o(K)(c.value.expenses)),1)]),_:1})]))}},Jt={class:"flex flex-col space-y-1"},Xt={__name:"TransactionCategories",setup(s){const p=H(),c=p.dispatch,i=V(()=>p.state.transactions.categories.filter(({total:a})=>a!==0)),n=w([{bgColor:"#e5f6ff",fontColor:"inherit"},{bgColor:"#ceeaf9",fontColor:"inherit"},{bgColor:"#b8ddf4",fontColor:"inherit"},{bgColor:"#a1d1ee",fontColor:"inherit"},{bgColor:"#8ac4e9",fontColor:"inherit"},{bgColor:"#73b7e4",fontColor:"inherit"},{bgColor:"#5aaae0",fontColor:"inherit"},{bgColor:"#3c9edb",fontColor:"inherit"},{bgColor:"#0091d6",fontColor:"inherit"},{bgColor:"#0585c7",fontColor:"#fff"},{bgColor:"#0879b9",fontColor:"#fff"},{bgColor:"#096dab",fontColor:"#fff"},{bgColor:"#09619c",fontColor:"#fff"},{bgColor:"#08568e",fontColor:"#fff"},{bgColor:"#054b80",fontColor:"#fff"},{bgColor:"#034073",fontColor:"#fff"},{bgColor:"#003665",fontColor:"#fff"},{bgColor:"#1b4576",fontColor:"#fff"},{bgColor:"#2f5488",fontColor:"#fff"},{bgColor:"#41649a",fontColor:"#fff"}]);return oe(()=>{c("REQUEST_GET_TRANSACTIONS_BY_CATEGORY")}),(a,e)=>(y(),E(o(Q),null,{default:k(()=>[v(o(Y),{as:"h3",class:"text-slate-800 mb-2"},{default:k(()=>[O("Categories")]),_:1}),u("div",Jt,[(y(!0),$(B,null,W(i.value,({name:d,total:f},m)=>{var t,r,l;return y(),$("div",{key:d,class:"border text-sm rounded px-2 py-[3px] flex items-center justify-between",style:Ue({"background-color":(t=n.value[m])==null?void 0:t.bgColor,color:(r=n.value[m])==null?void 0:r.fontColor,"border-color":(l=n.value[m])==null?void 0:l.bgColor})},[u("label",null,A(d),1),u("p",null,A(o(K)(f)),1)],4)}),128))])]),_:1}))}},Zt={class:"container md:pt-2 lg:pt-5 md:px-2 lg:px-8 h-full"},el={class:"flex flex-col lg:flex-row-reverse gap-y-10 gap-x-4"},tl={class:"flex-1 flex flex-col space-y-3 shrink-0 lg:pt-[50px]"},ll={class:"lg:w-9/12 h-max"},al={class:"px-2 md:px-0 mb-3 flex flex-row items-start md:items-center justify-between gap-y-2 gap-x-2"},sl={class:"flex flex-col md:flex-row gap-y-5 gap-x-2 md:gap-x-4 md:items-center"},ol={class:"flex items-center gap-x-2"},nl=u("span",{class:"text-xs"},"Filters: ",-1),rl={class:"flex gap-x-2"},ul={key:0,class:"bg-gray-200 rounded py-[2px] px-2 text-[11px]"},il={class:"flex md:items-center justify-end flex-1 gap-x-2"},wl={__name:"Transactions",setup(s){const p=H(),c=p.dispatch,i=p.commit,n=V(()=>p.state.transactions.items),a=V(()=>p.state.transactions.filters),e=w(null),d=w([]),f=w(!1),m=w(!1),t=w(!1),r=w(!1),l=w(!1),g=w(!1),b=w(!1),C=w(!0);oe(async()=>{C.value=!0,await _(),c("REQUEST_GET_ACCOUNTS"),c("REQUEST_GET_CATEGORY")});const _=async()=>{await c("REQUEST_GET_TRANSACTIONS_SUMMARY"),await c("REQUEST_GET_TRANSACTIONS"),C.value=!1},T=j=>{i("UPDATE_TRANSACTIONS_STATE",{...a,filters:{start:j.start,end:j.end}}),_()},x=j=>{j==="update"&&(g.value=!0),j==="delete"&&(b.value=!0)},F=async()=>{(await c("REQUEST_BULK_DELETE_TRANSACTION",{transactions:d.value})).status===200&&(_(),t.value=!1,b.value=!1)};return(j,h)=>(y(),$(B,null,[u("section",Zt,[u("div",el,[u("div",tl,[v(o(Yt)),v(o(Xt))]),u("div",ll,[u("div",al,[u("div",sl,[d.value.length?(y(),E(o(_t),{key:0,onAction:x})):N("",!0),u("div",ol,[nl,u("div",rl,[Object.keys(a.value).includes("start")&&Object.keys(a.value).includes("end")?(y(),$("div",ul,A(o(I)(a.value.start,"MMM dd, yyyy"))+" - "+A(o(I)(a.value.end,"MMM dd, yyyy")),1)):N("",!0)])])]),u("div",il,[v(o(P),{variant:"blank",class:"!p-[6px] !border !border-solid !border-slate-800",onClick:h[0]||(h[0]=M=>r.value=!0)},{default:k(()=>[v(o(L),{name:"AdjustmentsHorizontalIconOutline",class:"w-6 h-6 text-slate-900"})]),_:1}),v(o(P),{variant:"blank",class:"!border !border-solid !border-slate-800",onClick:h[1]||(h[1]=M=>l.value=!0)},{default:k(()=>[v(o(L),{name:"ArrowUpTrayIconOutline",class:"w-5 h-5 text-slate-900"})]),_:1}),v(o(P),{class:"!p-2",onClick:h[2]||(h[2]=M=>f.value=!0)},{default:k(()=>[v(o(L),{name:"PlusIcon",class:"w-5 h-5"})]),_:1})])]),C.value?N("",!0):(y(),E(o(Pt),{key:0,transactions:n.value,onCheckboxChecked:h[3]||(h[3]=M=>d.value=M),onShow:h[4]||(h[4]=M=>{e.value=M}),onEdit:h[5]||(h[5]=M=>{e.value=M,m.value=!0}),onDelete:h[6]||(h[6]=M=>{e.value=M,t.value=!0})},null,8,["transactions"])),C.value?(y(),E(o(Fe),{key:1,placement:"internal","show-text":!1})):N("",!0)])])]),v(o(pt),{show:r.value,onClose:h[7]||(h[7]=M=>r.value=!1),onDatesChanged:h[8]||(h[8]=M=>{T(M),r.value=!1})},null,8,["show"]),v(o(nt),{show:f.value,onClose:h[9]||(h[9]=M=>f.value=!1),onSuccess:h[10]||(h[10]=()=>{_(),f.value=!1})},null,8,["show"]),m.value?(y(),E(o(rt),{key:0,show:m.value,model:e.value,onClose:h[11]||(h[11]=M=>m.value=!1),onSuccess:h[12]||(h[12]=()=>{_(),m.value=!1})},null,8,["show","model"])):N("",!0),t.value?(y(),E(o(ut),{key:1,show:t.value,model:e.value,onClose:h[13]||(h[13]=M=>t.value=!1),onConfirm:F},null,8,["show","model"])):N("",!0),v(o(zt),{show:l.value,onClose:h[14]||(h[14]=M=>l.value=!1),onSuccess:h[15]||(h[15]=()=>{_(),l.value=!1})},null,8,["show"]),v(o(xe),{show:b.value,message:`Are you sure you want to delete (${d.value.length}) transaction${d.value.length>1?"s":""}?`,onClose:h[16]||(h[16]=M=>b.value=!1),onConfirm:F},null,8,["show","message"])],64))}};export{wl as default};
