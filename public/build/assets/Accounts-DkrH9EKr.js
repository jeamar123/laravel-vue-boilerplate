import{o as _,e as A,w,h as u,f as o,u as y,r as C,d as T,i as $,j as x,k as N,c as g,H as O,g as S,F as U,$ as k}from"./app-CziYxJxq.js";import{_ as R,a as E,C as B}from"./TextInput.vue_vue_type_script_setup_true_lang-DAMbecX4.js";import{_ as b,a as V}from"./number-CVFygPke.js";import{_ as j}from"./Table.vue_vue_type_script_setup_true_lang-Cp0cfhGz.js";import{_ as M}from"./SelectInput.vue_vue_type_script_setup_true_lang-CcmijmoF.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={__name:"CreateAccountModal",props:{show:{type:Boolean,default:()=>!1}},emits:["close","success"],setup(c,{emit:l}){const a=l;return(m,s)=>(_(),A(o(b),{show:c.show,title:"Create Account","wrapper-class":"lg:max-w-[500px]",onClose:s[2]||(s[2]=n=>a("close"))},{"body-footer":w(()=>[u(o(h),{"api-route":"REQUEST_CREATE_ACCOUNT",onClose:s[0]||(s[0]=n=>a("close")),onSuccess:s[1]||(s[1]=n=>a("success"))})]),_:1},8,["show"]))}},F={__name:"UpdateAccountModal",props:{show:{type:Boolean,default:()=>!1},model:{type:Object,required:!0}},emits:["close","success"],setup(c,{emit:l}){const a=l;return(m,s)=>(_(),A(o(b),{show:c.show,title:"Edit Account","wrapper-class":"lg:max-w-[500px]",onClose:s[2]||(s[2]=n=>a("close"))},{"body-footer":w(()=>[u(o(h),{"api-route":"REQUEST_UPDATE_ACCOUNT",model:c.model,onClose:s[0]||(s[0]=n=>a("close")),onSuccess:s[1]||(s[1]=n=>a("success"))},null,8,["model"])]),_:1},8,["show"]))}},Q={__name:"DeleteAccount",props:{show:{type:Boolean,default:()=>!1},model:{type:Object,required:!0}},emits:["close","confirm"],setup(c,{emit:l}){const a=c,m=l,n=y().dispatch,t=async()=>{let{status:d}=await n("REQUEST_DELETE_ACCOUNT",{id:a.model.id});d===200&&(n("SHOW_NOTIF_ALERT",{message:"Account deleted."}),m("confirm"))};return(d,i)=>(_(),A(o(M),{show:c.show,message:"Are you sure you want to delete this account?",onClose:i[0]||(i[0]=p=>m("close")),onConfirm:t},null,8,["show"]))}},q={class:"px-6 pt-6 pb-8"},H={class:"flex items-center justify-end gap-x-4 p-4"},h={__name:"AccountForm",props:{model:{type:Object,default:()=>{}},apiRoute:{type:String,required:!0}},emits:["close","success"],setup(c,{emit:l}){const a=c,m=l,n=y().dispatch,t=C({name:null,errors:{},success:!1,...a.model}),d=async()=>{t.value.errors={};const{data:p,status:r}=await n(a.apiRoute,t.value);[200,201].includes(r)?(t.value.success=!0,i(),n("SHOW_NOTIF_ALERT",{message:"Changes saved."}),m("success")):(t.value.errors=p.errors,t.value.errors.name="")},i=()=>{t.value={name:null,errors:{},success:!1}};return(p,r)=>{var f;return _(),T("form",{novalidate:"",onSubmit:N(d,["prevent"])},[$("div",q,[u(o(R),{modelValue:t.value.name,"onUpdate:modelValue":r[0]||(r[0]=e=>t.value.name=e),label:"Name",errors:(f=t.value.errors)==null?void 0:f.name},null,8,["modelValue","errors"])]),$("div",H,[u(o(E),{variant:"blank",onClick:r[1]||(r[1]=e=>m("close"))},{default:w(()=>[x(" Cancel ")]),_:1}),u(o(E),{type:"submit"},{default:w(()=>[x(" Confirm ")]),_:1})])],32)}}},I={class:"container md:py-2 lg:py-5 md:px-2 lg:px-8 grid md:grid-cols-2"},L={class:"mb-3 flex items-center justify-between gap-x-2"},P={class:"flex items-start gap-x-2"},Z={__name:"Accounts",setup(c){const l=y(),a=l.dispatch,m=g(()=>l.state.accounts.headers),s=g(()=>l.state.accounts.items.map(f=>(f.showActions=!!f.user_id,f))),n=g(()=>l.state.accounts.pagination),t=C({}),d=C(!1),i=C(!1),p=C(!1);O(()=>{r()});const r=()=>{a("REQUEST_GET_ACCOUNTS")};return(f,e)=>(_(),T(U,null,[$("section",I,[u(o(B),{class:"!p-2 md:!p-4"},{default:w(()=>[$("div",L,[u(o(V),{as:"h3"},{default:w(()=>[x("Accounts")]),_:1}),$("div",P,[u(o(E),{class:"!p-2",onClick:e[0]||(e[0]=v=>d.value=!0)},{default:w(()=>[u(o(k),{name:"PlusIcon",class:"w-5"})]),_:1})])]),u(o(j),{id:"account-table",class:"",headers:m.value,data:s.value,"show-checkbox":!1,"show-items-info":!1,pagination:n.value,onEdit:e[1]||(e[1]=v=>{t.value=v,i.value=!0}),onDelete:e[2]||(e[2]=v=>{t.value=v,p.value=!0})},null,8,["headers","data","pagination"])]),_:1})]),u(o(D),{show:d.value,onClose:e[3]||(e[3]=v=>d.value=!1),onSuccess:e[4]||(e[4]=()=>{r(),d.value=!1})},null,8,["show"]),i.value?(_(),A(o(F),{key:0,show:i.value,model:t.value,onClose:e[5]||(e[5]=v=>i.value=!1),onSuccess:e[6]||(e[6]=()=>{r(),i.value=!1})},null,8,["show","model"])):S("",!0),p.value?(_(),A(o(Q),{key:1,show:p.value,model:t.value,onClose:e[7]||(e[7]=v=>p.value=!1),onConfirm:e[8]||(e[8]=()=>{r(),p.value=!1})},null,8,["show","model"])):S("",!0)],64))}};export{Z as default};
